language: node_js
node_js:
  - "6"

sudo: false

env:
  global:
    - TRAVIS_COMMIT_MSG="$(git log --format=%B --no-merges -n 1)"

before_install:
  - echo "machine github.com login $GH_TOKEN" >> ~/.netrc
  - rvm install 2.2.2

install:
  - ./script/setup
  - gem install rake html-proofer

script:
  - npm run-script travis_script

deploy:
  - provider: script
    script: npm run-script travis_after_success
    skip_cleanup: true
    on:
      all_branches: true
      #branch: master
  - provider: script
    script: npm run-script travis_after_success
    skip_cleanup: true
    on:
      tags: true

notifications:
  irc:
  - "chat.freenode.net#wet-boew"
