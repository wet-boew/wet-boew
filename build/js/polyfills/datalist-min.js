$.fn.datalist=function(){return((typeof this[0].list==="object")&&(document.createElement("datalist")&&!!window.HTMLDataListElement))?this:this.each(function(){var g=$(this),f=$("#"+g.attr("list")),e=f.find("option"),d=g.width(),a=g.height(),c=$("<ul>",{"class":"datalist",width:d,css:{position:"absolute",left:0,top:a+6,margin:0,padding:"0 2px","list-style":"none",border:"1px solid #ccc","-moz-box-shadow":"0px 2px 3px #ccc","-webkit-box-shadow":"0px 2px 3px #ccc","box-shadow":"0px 2px 3px #ccc","z-index":99,background:"#fff",cursor:"default"}}),h=$("<div>").css("position","relative");if(!f.length){return this}else{e.each(function(k,j){$("<li>").append('<span class="value">'+j.value+"</span>").append('<span class="label" style="float:right">'+j.label+"</span>").appendTo(c)})}g.wrap(h);c.hide().insertAfter(g);g.focus(function(){c.show()});g.blur(function(){c.hide()});var b=g.next().find("li");b.mousedown(function(){var i=$(this).find("span.value").text();g.val(i)})})};$(document).ready(function(){$("input[list]").datalist()});