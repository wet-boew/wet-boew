/*!
 * Calendar interface v1.23 / Interface du calendrier v1.23
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * www.tbs.gc.ca/ws-nw/wet-boew/terms / www.sct.gc.ca/ws-nw/wet-boew/conditions
 */
var calendar={dictionary:{weekDayNames:(pe.language=="en")?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],monthNames:(pe.language=="en")?["January","February","March","April","May","June","July","August","September","October","November","December"]:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],currentDay:(pe.language=="en")?" (Current Day)":" (Jour courrant)",goToLink:(pe.language=="en")?'Go To<span class="cn-invisible"> Month of Year</span>':'Aller au <span class="cn-invisible"> mois de l\'année</span>',goToTitle:(pe.language=="en")?"Go To Month of Year":"Aller au mois de l'année",goToMonth:(pe.language=="en")?"Month:":"Mois : ",goToYear:(pe.language=="en")?"Year:":"Année : ",goToButton:(pe.language=="en")?"Go":"Aller",cancelButton:(pe.language=="en")?"Cancel":"Annuler",previousMonth:(pe.language=="en")?"Previous Month: ":"Mois précédent : ",nextMonth:(pe.language=="en")?"Next Month: ":"Mois suivant : "},create:function(g,k,i,h,a,m){var e;var c=$("#"+g);c.addClass("cal-container");c.removeClass("cal-container-extended");var f=calendar.getDateFromISOString(a);if(f==null){f=(new Date);f.setFullYear(k-1,i,1)}var b=calendar.getDateFromISOString(m);if(b==null){b=(new Date);b.setFullYear(k+1,i,1)}if(k>b.getFullYear()||(k==b.getFullYear()&&i>b.getMonth())){k=b.getFullYear();i=b.getMonth()}else{if(k<f.getFullYear()||(k==f.getFullYear()&&i<f.getMonth())){k=f.getFullYear();i=f.getMonth()}}if(c.children("div#cal-"+g+"-cnt").length>0){c.children("div#cal-"+g+"-cnt").find("ol#cal-"+g+"-weekdays, .cal-month, div#cal-"+g+"-days").remove();e=c.children("div#cal-"+g+"-cnt")}else{e=$('<div id="cal-'+g+'-cnt" class="cal-cnt"></div>');c.append(e)}var l;if(c.children("div#cal-"+g+"-cnt").children(".cal-header").length>0){l=c.children("div#cal-"+g+"-cnt").children(".cal-header")}else{l=$('<div class="cal-header"></div>')}l.prepend('<div class="cal-month">'+this.dictionary.monthNames[i]+" "+k+"</div>");if(h){var d=this.createMonthNav(g,k,i,f,b);if($("#cal-"+g+"-monthnav").length<1){l.append(d)}if(c.children("div#cal-"+g+"-cnt").children(".cal-header").children(".cal-goto").length<1){l.append(this.createGoToForm(g,k,i,f,b))}}e.append(l);e.append(this.createWeekdays(g));var o=this.createDays(g,k,i);var j=o.children("ol.cal-day-list").children("li");e.append(o);c.trigger("calendarDisplayed",[k,i,j])},createMonthNav:function(l,j,i,e,a){var c;if($("#cal-"+l+"-monthnav").length>0){c=$("#cal-"+l+"-monthnav")}else{c=$('<div id="cal-'+l+'-monthnav"></div>')}for(n=0;n<2;n++){var o;var g;var m;var d;var h=true;var k=null;var b=null;switch(n){case 0:o="prevmonth";g=this.dictionary.previousMonth;if(i>0){m=i-1;d=j}else{m=11;d=j-1}if((m<e.getMonth()&&d<=e.getFullYear())||d<e.getFullYear()){h=false}break;case 1:o="nextmonth";g=this.dictionary.nextMonth;if(i<11){m=i+1;d=j}else{m=0;d=j+1}if((m>a.getMonth()&&d>=a.getFullYear())||d>a.getFullYear()){h=false}break}if(c.children(".cal-"+o).length>0){k=c.children(".cal-"+o)}if(h){var f=g+this.dictionary.monthNames[m]+" "+d;if(k){b=k.children("a");b.children("img").attr("alt",f);b.unbind()}else{k=$('<div class="cal-'+o+'"></div>');b=$('<a href="javascript:;" role="button"><img src="'+pe.add.liblocation+"images/calendar/"+o.substr(0,1)+'.gif" alt="'+f+'" /></a>');k.append(b);c.append(k)}b.bind("click",{year:d,month:m,mindate:calendar.getISOStringFromDate(e),maxdate:calendar.getISOStringFromDate(a)},function(p){calendar.create(l,p.data.year,p.data.month,true,p.data.mindate,p.data.maxdate);$(this).focus()})}else{if(k){k.remove()}}}return c},yearChanged:function(b){var j=$(this).val(),d=b.data.minDate,a=b.data.maxDate,f=b.data.monthField;var g=0,c=11;if(j==d.getFullYear()){g=d.getMonth()}if(j==a.getFullYear()){c=a.getMonth()}var h=f.val();while(f.children("option").length){f.get(0).remove(0)}for(var e=g;e<=c;e++){f.append('<option value="'+e+'"'+((e==h)?' selected="selected"':"")+">"+calendar.dictionary.monthNames[e]+"</option>")}},createGoToForm:function(p,h,r,e,g){var d=$('<div class="cal-goto"></div>');var c=$('<form id="cal-'+p+'-goto" role="form" style="display:none;" action=""><fieldset><legend>'+this.dictionary.goToTitle+"</legend></fieldset></form>");c.submit(function(){calendar.onGoTo(p,e,g);return false});var j=c.children("fieldset");var o=$('<div class="cal-goto-year"><label for="cal-'+p+'-goto-year" class="cn-invisible">'+this.dictionary.goToYear+"</label></div>");var l=$('<select id="cal-'+p+'-goto-year"></select>');for(var f=e.getFullYear();f<=g.getFullYear();f++){l.append($('<option value="'+f+'"'+(f==h?' selected="selected"':"")+">"+f+"</option>"))}o.append(l);j.append(o);var k=$('<div class="cal-goto-month"><label for="cal-'+p+'-goto-month" class="cn-invisible">'+this.dictionary.goToMonth+"</label></div>");var t=$('<select id="cal-'+p+'-goto-month"></select>');k.append(t);j.append(k);if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){$(this.dictionary.monthNames).each(function(u,v){t.append('<option value="'+u+'"'+((u==r)?' selected="selected"':"")+">"+v+"</option>")})}else{l.bind("change",{minDate:e,maxDate:g,monthField:t},this.yearChanged);l.change()}var m=$('<div class="cal-goto-button"></div>');var a=$('<input type="submit" value="'+this.dictionary.goToButton+'" />');m.append(a);j.append(m);var q=$('<div class="cal-goto-button"></div>');var s=$('<input type="button" value="'+this.dictionary.cancelButton+'" />');s.click(function(){calendar.hideGoToForm(p)});q.append(s);j.append(q);var b=$('<p class="cal-goto-link" id="cal-'+p+'-goto-link"></p>');var i=$('<a href="javascript:;" role="button" aria-controls="cal-'+p+'-goto" aria-expanded="false">'+this.dictionary.goToLink+"</a>");i.click(function(){calendar.showGoToForm(p)});b.append(i);d.append(b);d.append(c);return d},createWeekdays:function(c){var b=$('<ol id="cal-'+c+'-weekdays" class="cal-weekdays" role="presentation"></ol>');for(var d=0;d<7;d++){var a=this.dictionary.weekDayNames[d];var e=$('<li id="cal-'+c+"-wd"+(d+1)+'" class="cal-wd'+(d+1)+'"><abbr title="'+a+'">'+a.substr(0,1)+"</abbr></li>");if(d==0||d==6){e.addClass="we"}b.append(e)}return b},createDays:function(o,k,i){var r=$('<div id="cal-'+o+'-days" class="cal-days"></div>');var q=$('<ol id="cal-'+o+"-"+i+"_"+k+'" class="cal-day-list"></ol>');var e=(new Date);e.setFullYear(k,i,1);var a=e.getDay();e.setFullYear(k,i+1,0);var l=e.getDate()-1;e=(new Date);e.getDate();var d=0;var f=false;for(var b=1;b<7;b++){for(var m=0;m<7;m++){var g;var h;if((b==1&&m<a)||(d>l)){g=$('<span class="cal-empty">'+String.fromCharCode(160)+"</span>");h=r}else{d++;var j=(d==e.getDate()&&i==e.getMonth()&&k==e.getFullYear());if(d==1){r.append(q)}if(d>l){f=true}g=$("<li></li>");var c=$("<div></div>");if(pe.language=="en"){var p="";if(d>10&&d<20){p="th"}else{switch(d%10){case 1:p="st";break;case 2:p="nd";break;case 3:p="rd";break;default:p="th"}}c.append('<span class="cn-invisible">'+this.dictionary.weekDayNames[m]+" "+this.dictionary.monthNames[i]+" </span>"+d+'<span class="cn-invisible">'+p+" "+k+((j)?this.dictionary.currentDay:"")+"</span>")}else{if(pe.language=="fr"){c.append('<span class="cn-invisible">'+this.dictionary.weekDayNames[m]+" </span>"+d+'<span class="cn-invisible"> '+this.dictionary.monthNames[i].toLowerCase()+" "+k+((j)?this.dictionary.currentDay:"")+"</span>")}}g.append(c);h=q}g.attr("id","cal-"+o+"-w"+b+"d"+(m+1));g.addClass("cal-w"+b+"d"+(m+1));g.addClass("cal-index-"+d);if(m==0||m==6){g.addClass("cal-we")}if(j){g.addClass("cal-currentday")}h.append(g)}if(f){break}}return r},showGoToForm:function(a){$("#cal-"+a+"-monthnav").children(".cal-prevmonth, .cal-nextmonth").addClass("cn-invisible");$("#cal-"+a+"-monthnav").children(".cal-prevmonth, .cal-nextmonth").children("a").attr("aria-hidden","true");var c=$("#cal-"+a+"-goto-link");var b=$("#cal-"+a+"-goto");c.stop().slideUp(0);b.stop().slideDown(0).queue(function(){$(this).find(":input:eq(0)").focus()});c.children("a").attr("aria-hidden","true");c.children("a").attr("aria-expanded","true");$("#"+a).addClass("cal-container-extended")},hideGoToForm:function(a){var c=$("#cal-"+a+"-goto-link");var b=$("#cal-"+a+"-goto");b.stop().slideUp(0).queue(function(){$("#cal-"+a+"-monthnav").children(".cal-prevmonth, .cal-nextmonth").removeClass("cn-invisible");$("#cal-"+a+"-monthnav").children(".cal-prevmonth, .cal-nextmonth").children("a").attr("aria-hidden","false");$("#"+a).removeClass("cal-container-extended")});c.stop().slideDown(0);c.children("a").attr("aria-hidden","false");c.children("a").attr("aria-expanded","false")},onGoTo:function(c,e,g){var b=$("#"+c);var a=b.find("fieldset");var f=parseInt(a.find(".cal-goto-month select option:selected").attr("value"));var d=parseInt(a.find(".cal-goto-year select").attr("value"));if(!(f<e.getMonth()&&d<=e.getFullYear())&&!(f>g.getMonth()&&d>=g.getFullYear())){calendar.create(c,d,f,true,calendar.getISOStringFromDate(e),calendar.getISOStringFromDate(g));calendar.hideGoToForm(c);$("#cal-"+c+"-days").find("a:eq(0)").focus()}},getDateFromISOString:function(b){var a=null;if(b){if(b.match(/\d{4}-\d{2}-\d{2}/)){var a=(new Date);a.setFullYear(b.substr(0,4),b.substr(5,2)-1,b.substr(8,2)-1)}return a}return null},getISOStringFromDate:function(a){return a.getFullYear()+"-"+this.strPad(a.getMonth()+1,2,"0")+"-"+this.strPad(a.getDate()+1,2,"0")},strPad:function(b,a,c){var d=b.toString();if(!c){c="0"}while(d.length<a){d=c+d}return d}};var dates={convert:function(a){return(a.constructor===Date?a:a.constructor===Array?new Date(a[0],a[1]-1,a[2]):a.constructor===Number?new Date(a):a.constructor===String?new Date(a):typeof a==="object"?new Date(a.year,a.month,a.date):NaN)},compare:function(d,c){return(isFinite(d=this.convert(d).valueOf())&&isFinite(c=this.convert(c).valueOf())?(d>c)-(d<c):NaN)},inRange:function(b,c,a){return(isFinite(b=this.convert(b).valueOf())&&isFinite(c=this.convert(c).valueOf())&&isFinite(a=this.convert(a).valueOf())?c<=b&&b<=a:NaN)},daysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},daysBetween:function(d,e){date1=this.convert(d);date2=this.convert(e);var a=0;oneMinute=1000*60;var b=oneMinute*60*24;date1.setHours(0);date1.setMinutes(0);date1.setSeconds(0);date2.setHours(0);date2.setMinutes(0);date2.setSeconds(0);if(date2>date1){a=(date2.getTimezoneOffset()-date1.getTimezoneOffset())*oneMinute}else{a=(date1.getTimezoneOffset()-date2.getTimezoneOffset())*oneMinute}var c=Math.abs(date2.getTime()-date1.getTime())-a;return Math.ceil(c/b)}};