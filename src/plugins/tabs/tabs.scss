/*
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 */
@import "../../variables";

/**
 * Shared variables
 */
$drabBlue: #243850;
$lightGray: #eee;
$medGray: #ccc;

%tabsGreyBackground {
	background: $medGray;
	background: transparentize($medGray, 0.1)
}

%tabsPositionRelative {
	position: relative;
}

%carouselTabs {
	position: absolute;
	z-index: 100;
}

%carouselDrabBlueBackground {
	background: $drabBlue;
	background: transparentize($drabBlue, 0.1);
}

//TODO:Combine with previous placeholder when libsass supports nested selectors
%carouselFigureImage {
	width: 100%;
	height: auto;
}

%carouselFigureCaptions {
	position: absolute;
	color: #fff;
	padding: 0.5em 1em;
	z-index: 101;
}

//TODO:Combine with previous placeholder when libsass supports nested selectors
%carouselFigureCaptionsLinks {
	color: #fff;
}

.wb-tabs {
	/**
	 * Default, minimal, shared style
	 */
	@extend %tabsPositionRelative;
	[role ="tablist"] {
		position : relative;
		list-style: none;
		margin: 0;
		padding: 0;
		li {
			display: inline-block;
			cursor: pointer;
			margin: 0 10px 0 0;
			color: #000;
			background: $lightGray;
			background: transparentize($lightGray, 0.1);
			border: 1px solid $medGray;
			text-align: center;
			position: relative;
			a {
				text-decoration: none;
				color: #000;
				display: inline-block;
				// changed padding and margin from em to px to fix web-kit layout issue
				padding: 10px;
			}
			&:focus, &:hover {
				@extend %tabsGreyBackground;
			}
			&.active {
				padding-bottom: 1px;
				border-bottom: 0;
				background: #fff;
				cursor: default;
				a {
					cursor: default;
				}
			}
		}
	}
	[role="tabpanel"] {
		z-index: 1;
		&.out {
			display: none;
		}
	}

	/**
	 * Style 1 - Basic carousel style
	 */
	&.carousel-s1 {
		[role="tablist"] {
			@extend %carouselTabs;
			bottom: 1em;
			left: 1em;
			li {
				&.active, &:focus, &:hover {
					top: 1px;
				}
			}
		}
		figure {
			@extend %tabsPositionRelative;
			@extend %carouselDrabBlueBackground;
			img {
				@extend %carouselFigureImage;
			}
		}
		figcaption {
			@extend %carouselFigureCaptions;
			top: 3em;
			right: 1em;
			a {
				@extend %carouselFigureCaptionsLinks;
			}
		}
	}

	/**
	 * Style 2 - Slider-like carousel style
	 */
	&.carousel-s2 {
		$thumbHeight: 50px;
		// 44px = 2 x 10px for anchor padding + 2 x 4px for list item padding + 16px for carousel bottom margin
		margin-bottom: $thumbHeight + 44px;
		[role="tablist"] {
			@extend %carouselTabs;
			width: 100%;
			height: 100%;
			li {
				display: none;
				border: none;
				&[role="presentation"] {
					display: inline-block;
					padding: 4px;
					top: 100%;
					background: $lightGray;
					background: transparentize($lightGray, .1);
					&.active, &:focus, &:hover {
						box-shadow: 0 0 4px $drabBlue;
					}
					&.active {
						a {
							img {
								/* Firefox 10+, Firefox on Android */
								filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/></filter></svg>#grayscale");
								/* Chrome 19+, Safari 6+, Safari 6+ iOS */
								-webkit-filter: unquote('grayscale(0%)');
							}
						}
					}
					a {
						img {
							box-shadow: none;
							/* Firefox 10+, Firefox on Android */
							filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
							/* IE6-9 */
							filter: gray;
							/* Chrome 19+, Safari 6+, Safari 6+ iOS */
							-webkit-filter: unquote('grayscale(100%)');
							max-height: $thumbHeight;
						}
					}
				}
				&.control {
					display: inline-block;
					position: absolute;
					top: 0;
					bottom: 0;
				}
				&.prv {
					left: 0;
				}
				&.nxt {
					right: 0;
				}
				&.prv, &.nxt {
					height: 100%;
					width: 3em;
					background: none;
					margin: 0;
					padding: 0;
					a {
						position: absolute;
						top: 0;
						bottom: 0;
						left: 0;
						width: 100%;
						color: $drabBlue;
						border: none;
						&.prv {
							background-image: linear-gradient(to right, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0) 100%);
							.glyphicon {
								left: .25em;
								padding-top: 1px;
								padding-right: 2px;
							}
						}
						&.nxt {
							background-image: linear-gradient(to left, rgba(255, 255 ,255, 0.25) 0%, rgba(255, 255, 255, 0) 100%);
							.glyphicon {
								right: .25em;
							}
						}
						&:focus, &:hover {
							background: transparent;
							&.prv {
								background-image: linear-gradient(to right, rgba(255, 255, 255, 0.45) 0%, rgba(255, 255, 255, 0) 100%);
							}
							&.nxt {
								background-image: linear-gradient(to left, rgba(255, 255, 255, 0.45) 0%, rgba(255, 255, 255, 0) 100%);
							}
							.glyphicon {
								box-shadow: none;
							}
						}
						.glyphicon {
							position: absolute;
							top: 0;
							bottom: 0;
							margin: auto 0;
							height: 1.75em;
							width: 1.75em;
							font-size: 1.75em;
							line-height: 1.75em;
							text-align: center;
							background: #fff;
							border-radius: 999px;
							box-shadow: 0 0 4px $drabBlue;
							&:focus, &:hover {
								box-shadow: none;
							}
						}
					}
				}
				&.plypause {
					background: none;
					border: none;
					display: inline-block !important;
					top: 100%;
					right: 0;
					padding: 2px 10px;
					i {
						color: #000 !important;
						font-style: normal;
					}
				}
			}
		}
		figure {
			@extend %tabsPositionRelative;
			@extend %carouselDrabBlueBackground;
			img {
				@extend %carouselFigureImage;
			}
		}
		figcaption {
			@extend %carouselFigureCaptions;
			bottom: 0;
			left: 0;
			right: 0;
			a {
				@extend %carouselFigureCaptionsLinks;
			}
			p {
				margin-bottom: 0;
			}
		}
		&.no-overlap {
			figcaption {
				@extend %tabsPositionRelative;
			}
		}
	}
	> {
		details {
			padding: 6px 12px;
		}
	}
}

.wb-disable {
	.wb-tabs {
		[role="tablist"] {
			display: none;
		}
		[role="tabpanel"] {
			display: block;
			opacity: 1;
		}
		> {
			details {
				> {
					summary {
						display: block !important;
					}
				}
			}
		}
	}
}
